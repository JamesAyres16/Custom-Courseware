
<%- include('../partials/header') %>
<%- include('../partials/nav') %>

<div class="container px-4 py-5">
    <div 
        class="p-5 mb-4 bg-light rounded-3 text-white" 
        style="background: center / cover no-repeat url('/media/required/library.jpg');"
    >
        <div class="container-fluid py-5">
            <h1 class="display-5 fw-bold pt-5">Build, Share, Learn</h1>
            <p class="col-md-8 fs-4">
                Allowing Educators to tailor courses to meet thier unique needs and interests of thier students. 
                From customizable assessments to dynamic discussion forums, Custom Courseware puts the power of 
                personalization in your hands.
            </p>
        </div>
    </div>
    <% if (locals.admin_view) { %>
    <div class="d-flex justify-content-end">
        <button 
            type="button"
            class="btn btn-outline-primary btn-sm"
            data-bs-toggle="modal"
            data-bs-target="#section-modal"
        >
            <i class="bi bi-plus"></i> Add Section 
        </button>
    </div>
    <% } %>
    <div 
        class="row g-4 py-5 section-container" 
        id="section-column"
    >
        <% sections.forEach(section => { %>
            <%- include('card', { section: section }) %>
        <%}) %>
    </div>
    <style>
        #section-column:last-child {
            width: 100% !important;
        }
    </style>
</div>

<% if (locals.admin_view) { %>
<form enctype='multipart/form-data' method='post' id="section-form">
    <div 
        class="modal fade" 
        id="section-modal" 
        tabindex="-1"  
    >
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="section-modal-title">New Section</h5>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="section-name" class="form-label">Name</label>
                        <input 
                            type="text" 
                            class="form-control" 
                            id="section-name" 
                            name="section_name" 
                            required
                        >
                    </div>
                                        
                    <div class="mb-3">
                        <label class="form-label" for="section-image">
                            Upload Background Image
                        </label>
                        <input 
                            type="file" 
                            class="form-control" 
                            id="section-image" 
                            name="section_image" 
                            accept="image/png, image/jpeg" 
                            required
                        >
                        <div class="form-text">
                            <small>
                                Upload Image for section card. 
                                Free Photos can be found on sites like unsplash.
                                You can also upload your own photos.
                            </small>
                        </div>
                    </div>  
                    <div class="mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="true" name="enable_subsections" id="enable_subsections" checked>
                            <label class="form-check-label" for="enable_subsections">Enable Subsections</label>
                        </div>
                        <div class="form-text">
                            <small>Check this box if you would like a section menu with mutiple slide decks.</small>
                        </div>
                    </div>       
                </div>
                <div class="modal-footer">
                    <button 
                        type="button" 
                        class="btn btn-secondary" 
                        data-bs-dismiss="modal" 
                        id="close-section-form"
                    >
                        Close
                    </button>
                    <button 
                        type="submit" 
                        class="btn btn-primary" 
                        id="submit-section"
                    >
                        Save
                    </button>
                </div>
            </div>
        </div>
    </div>
</form>
<script src="/scripts/section/admin/menu.js" defer></script>
<% } %>

<%- include('../partials/footer') %>
